<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Courchevel 1850 â€” Slippery Sliders ğŸ¿</title>
<meta name="description" content="Courchevel 1850 Ski Trip â€” 25 Feb â€“ 2 Mar 2026">
<meta property="og:title" content="Courchevel 1850 â€” Slippery Sliders ğŸ¿">
<meta property="og:description" content="Ski trip 25 Feb â€“ 2 Mar 2026 â€¢ Les 3 VallÃ©es, French Alps">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”ï¸</text></svg>">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    min-height: 100vh;
    background: linear-gradient(135deg, #0f2027 0%, #203a43 30%, #2c5364 70%, #0f2027 100%);
    font-family: 'Segoe UI', 'Helvetica Neue', -apple-system, sans-serif;
    color: #fff;
    overflow-x: hidden;
  }
  /* Snow */
  .snow-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden; }
  .snowflake { position: absolute; top: -10px; background: #fff; border-radius: 50%; animation: snowfall linear infinite; }
  @keyframes snowfall {
    0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
  }
  /* Layout */
  .container { position: relative; z-index: 1; max-width: 600px; margin: 0 auto; padding: 20px 16px 40px; }
  /* Header */
  .header { text-align: center; margin-bottom: 24px; }
  .header-icon { font-size: 48px; margin-bottom: 8px; }
  .header h1 { color: #fff; font-size: 32px; font-weight: 800; font-family: Georgia, serif; letter-spacing: 1px; text-shadow: 0 2px 20px rgba(0,0,0,0.3); }
  .header-date { color: rgba(255,255,255,0.6); font-size: 14px; letter-spacing: 3px; margin-top: 4px; }
  .header-badge { margin-top: 8px; display: inline-block; background: rgba(255,255,255,0.1); border-radius: 20px; padding: 4px 16px; font-size: 13px; color: rgba(255,255,255,0.8); }
  /* Countdown */
  .countdown { display: flex; justify-content: center; gap: 16px; padding: 20px 0; }
  .countdown-box { background: rgba(255,255,255,0.15); border-radius: 12px; padding: 14px 18px; min-width: 70px; text-align: center; backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
  .countdown-num { font-size: 32px; font-weight: 800; color: #fff; font-family: Georgia, serif; }
  .countdown-label { font-size: 11px; color: rgba(255,255,255,0.7); letter-spacing: 2px; margin-top: 4px; }
  .countdown-done { text-align: center; padding: 20px; font-size: 28px; font-weight: 700; color: #fff; }
  /* Tabs */
  .tabs { display: flex; gap: 6px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 4px; }
  .tab-btn { flex: 1; padding: 10px 8px; border-radius: 12px; border: none; cursor: pointer; font-size: 13px; font-weight: 600; background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.5); transition: all 0.2s; white-space: nowrap; }
  .tab-btn.active { background: rgba(255,255,255,0.2); color: #fff; }
  .tab-content { display: none; }
  .tab-content.active { display: block; }
  /* Sections / Accordions */
  .section { margin-bottom: 16px; border-radius: 16px; overflow: hidden; background: rgba(255,255,255,0.08); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.12); }
  .section-header { width: 100%; padding: 16px 20px; background: none; border: none; cursor: pointer; display: flex; justify-content: space-between; align-items: center; color: #fff; font-size: 18px; font-weight: 700; font-family: Georgia, serif; text-align: left; }
  .section-arrow { transition: transform 0.3s; font-size: 14px; }
  .section-arrow.open { transform: rotate(180deg); }
  .section-body { padding: 0 20px 20px; display: none; }
  .section-body.open { display: block; }
  /* Itinerary items */
  .itin-item { padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.06); color: rgba(255,255,255,0.85); font-size: 14px; line-height: 1.5; }
  .itin-item:last-child { border-bottom: none; }
  .lunch-tag { background: rgba(255,180,0,0.2); border-radius: 6px; padding: 2px 8px; color: #ffd54f; font-weight: 600; }
  /* Crew */
  .crew-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .crew-card { background: rgba(255,255,255,0.08); border-radius: 16px; padding: 16px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
  .crew-emoji { font-size: 40px; margin-bottom: 8px; }
  .crew-name { color: #fff; font-weight: 700; font-size: 16px; margin-bottom: 4px; }
  .crew-flights { color: rgba(255,255,255,0.5); font-size: 11px; line-height: 1.4; }
  .crew-status { margin-top: 8px; }
  .status-badge { display: inline-block; padding: 2px 10px; border-radius: 10px; font-size: 11px; font-weight: 600; }
  .status-confirmed { background: rgba(76,175,80,0.2); color: #81c784; }
  .status-pending { background: rgba(255,152,0,0.2); color: #ffb74d; }
  .crew-memories { margin-top: 16px; background: rgba(255,255,255,0.06); border-radius: 12px; padding: 16px; text-align: center; }
  .crew-memories-icon { font-size: 24px; margin-bottom: 8px; }
  .crew-memories-text { color: rgba(255,255,255,0.7); font-size: 13px; }
  /* Bookings */
  .booking-details { color: rgba(255,255,255,0.8); font-size: 13px; line-height: 1.6; white-space: pre-wrap; font-family: 'Segoe UI', sans-serif; }
  .seats-label { color: rgba(255,255,255,0.5); font-size: 11px; letter-spacing: 1px; margin-bottom: 8px; font-weight: 600; }
  .seats-table { width: 100%; border-collapse: collapse; font-size: 12px; }
  .seats-table th { padding: 6px 8px; color: rgba(255,255,255,0.5); font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.15); }
  .seats-table th:first-child { text-align: left; }
  .seats-table th { text-align: center; }
  .seats-table td { padding: 6px 8px; border-bottom: 1px solid rgba(255,255,255,0.06); }
  .seats-table td:first-child { color: #fff; font-weight: 600; text-align: left; }
  .seats-table td { color: rgba(255,255,255,0.8); text-align: center; font-family: monospace; }
  .eticket-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; border-bottom: 1px solid rgba(255,255,255,0.06); }
  .eticket-row:last-child { border-bottom: none; }
  .eticket-name { color: #fff; font-weight: 600; }
  .eticket-num { color: rgba(255,255,255,0.7); font-family: monospace; }
  /* Packing */
  .packing-hint { color: rgba(255,255,255,0.6); font-size: 13px; margin-bottom: 12px; text-align: center; }
  .packing-item { padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.06); display: flex; align-items: center; gap: 12px; cursor: pointer; user-select: none; -webkit-user-select: none; }
  .packing-item:last-child { border-bottom: none; }
  .packing-check { width: 22px; height: 22px; border-radius: 6px; border: 2px solid rgba(255,255,255,0.3); background: transparent; display: flex; align-items: center; justify-content: center; font-size: 14px; color: #81c784; flex-shrink: 0; transition: all 0.2s; }
  .packing-check.checked { border-color: #81c784; background: rgba(76,175,80,0.2); }
  .packing-text { color: rgba(255,255,255,0.85); font-size: 14px; transition: all 0.2s; }
  .packing-text.checked { color: rgba(255,255,255,0.4); text-decoration: line-through; }
  /* Snow Report */
  .snow-report-loading { text-align: center; padding: 40px 20px; color: rgba(255,255,255,0.6); font-size: 14px; }
  .snow-report-loading .spinner { display: inline-block; width: 24px; height: 24px; border: 3px solid rgba(255,255,255,0.2); border-top-color: #fff; border-radius: 50%; animation: spin 0.8s linear infinite; margin-bottom: 12px; }
  @keyframes spin { to { transform: rotate(360deg); } }
  .snow-report-error { text-align: center; padding: 40px 20px; color: rgba(255,152,0,0.8); font-size: 14px; }
  .snow-current { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; }
  .snow-stat { background: rgba(255,255,255,0.08); border-radius: 16px; padding: 16px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
  .snow-stat-icon { font-size: 28px; margin-bottom: 6px; }
  .snow-stat-value { font-size: 28px; font-weight: 800; color: #fff; font-family: Georgia, serif; }
  .snow-stat-unit { font-size: 13px; color: rgba(255,255,255,0.5); margin-left: 2px; }
  .snow-stat-label { font-size: 11px; color: rgba(255,255,255,0.5); letter-spacing: 1px; margin-top: 4px; }
  .snow-forecast { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px; }
  .snow-forecast-day { flex: 0 0 auto; min-width: 90px; background: rgba(255,255,255,0.08); border-radius: 12px; padding: 12px 10px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
  .snow-forecast-day.trip-day { border-color: rgba(100,181,246,0.4); background: rgba(100,181,246,0.1); }
  .snow-forecast-date { font-size: 11px; color: rgba(255,255,255,0.5); letter-spacing: 1px; margin-bottom: 6px; }
  .snow-forecast-icon { font-size: 22px; margin-bottom: 4px; }
  .snow-forecast-snow { font-size: 16px; font-weight: 700; color: #fff; }
  .snow-forecast-temp { font-size: 11px; color: rgba(255,255,255,0.5); margin-top: 4px; }
  .snow-forecast-label { font-size: 9px; color: rgba(255,255,255,0.4); margin-top: 2px; }
  .snow-updated { text-align: center; color: rgba(255,255,255,0.3); font-size: 11px; margin-top: 16px; }
  .trip-badge { display: inline-block; background: rgba(100,181,246,0.2); color: #90caf9; font-size: 9px; font-weight: 600; padding: 1px 6px; border-radius: 6px; letter-spacing: 0.5px; margin-top: 4px; }
  /* Footer */
  .footer { text-align: center; margin-top: 32px; color: rgba(255,255,255,0.3); font-size: 12px; }
</style>
</head>
<body>

<!-- Snow -->
<div class="snow-container" id="snow"></div>

<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="header-icon">ğŸ”ï¸</div>
    <h1>COURCHEVEL 1850</h1>
    <div class="header-date">25 FEB â€” 2 MAR 2026</div>
    <div class="header-badge">ğŸ‡«ğŸ‡· Les 3 VallÃ©es, French Alps</div>
  </div>

  <!-- Countdown -->
  <div id="countdown"></div>

  <!-- Tabs -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="itinerary">ğŸ“… Itinerary</button>
    <button class="tab-btn" data-tab="crew">ğŸ‘¥ Crew</button>
    <button class="tab-btn" data-tab="bookings">ğŸ“‹ Bookings</button>
    <button class="tab-btn" data-tab="snow">ğŸŒ¨ï¸ Snow</button>
    <button class="tab-btn" data-tab="packing">ğŸ’ Packing</button>
  </div>

  <!-- Itinerary Tab -->
  <div class="tab-content active" id="tab-itinerary"></div>

  <!-- Crew Tab -->
  <div class="tab-content" id="tab-crew"></div>

  <!-- Bookings Tab -->
  <div class="tab-content" id="tab-bookings"></div>

  <!-- Snow Report Tab -->
  <div class="tab-content" id="tab-snow"></div>

  <!-- Packing Tab -->
  <div class="tab-content" id="tab-packing"></div>

  <!-- Footer -->
  <div class="footer">ğŸ”ï¸ Courchevel 2026 â€¢ Let's send it! ğŸ¿</div>
</div>

<script>
// â”€â”€â”€ DATA â”€â”€â”€
const TRIP_DATE = new Date("2026-02-25T20:15:00+02:00");

const CREW = [
  {name:"Daniel",emoji:"ğŸ¿",flights:"Swiss LX 283/2802",status:"confirmed"},
  {name:"Paul",emoji:"â›·ï¸",flights:"Swiss LX 283/2802",status:"confirmed"},
  {name:"Shannon",emoji:"ğŸ‚",flights:"Swiss LX 283/2802",status:"confirmed"},
  {name:"Steve",emoji:"ğŸ¿",flights:"Swiss LX 283/2802",status:"confirmed"},
  {name:"Matt",emoji:"â›·ï¸",flights:"Arriving late Fri 27th",status:"flight details pending"},
  {name:"James (Jimmy)",emoji:"ğŸ‚",flights:"Meeting in Geneva",status:"flight details pending"},
];

const ITINERARY = [
  {day:"Wed 25 Feb",title:"Departure Day âœˆï¸",items:["20:15 â€” Depart JNB on LX 283 (Business)","Overnight flight to Zurich"],open:true},
  {day:"Thu 26 Feb",title:"Arrival Day ğŸ”ï¸",items:["06:10 â€” Land in Zurich","07:30 â€” Connect LX 2802 to Geneva","08:25 â€” Arrive Geneva","Jimmy meets the group in Geneva","09:45 â€” Transfer pick-up from Geneva Airport","~12:55 â€” Arrive Courchevel 1850","16:00 â€” Hotel check-in","Evening: Settle in & explore the resort"],open:true},
  {day:"Fri 27 Feb",title:"Day 2 on the Slopes â›·ï¸",items:["09:00â€“11:00 â€” Daniel's private ski lesson (New Generation)","Free skiing for the crew","Matt arrives late evening"]},
  {day:"Sat 28 Feb",title:"Full Send Saturday ğŸ¿",items:["Full day skiing","LUNCH â€” Bagatelle ğŸ½ï¸"]},
  {day:"Sun 1 Mar",title:"Sunday Shred ğŸ‚",items:["Full day skiing","LUNCH â€” BAIES ğŸ½ï¸"]},
  {day:"Mon 2 Mar",title:"Last Runs & Departure ğŸ›«",items:["Morning skiing â€” last runs!","10:50 â€” Transfer pick-up from Courchevel","~14:00 â€” Arrive Geneva Airport","19:00 â€” LX 2817 Geneva â†’ Zurich","22:40 â€” LX 282 Zurich â†’ JNB (Business)"]},
  {day:"Tue 3 Mar",title:"Home ğŸ ",items:["10:30 â€” Land in JNB"]},
];

const BOOKINGS = [
  {title:"Flights (Daniel, Paul, Shannon, Steve)",icon:"âœˆï¸",open:true,
    details:"Swiss International Air Lines â€” Business Class\nBooking Ref: 8VFHHV\n\nOutbound:\nâ€¢ LX 283: JNB 20:15 â†’ Zurich 06:10\nâ€¢ LX 2802: Zurich 07:30 â†’ Geneva 08:25\n\nReturn:\nâ€¢ LX 2817: Geneva 19:00 â†’ Zurich 19:55\nâ€¢ LX 282: Zurich 22:40 â†’ JNB 10:30+1",
    seats:[
      {name:"Daniel",s:["10G","07A","07A","11G"],ticket:"LX 724-5073940216"},
      {name:"Paul",s:["10D","07C","06C","11D"],ticket:"LX 724-5073940219"},
      {name:"Shannon",s:["09D","06D","04C","10D"],ticket:"LX 724-5073940217"},
      {name:"Steve",s:["09G","06F","05A","10G"],ticket:"LX 724-5073940218"}
    ]},
  {title:"Ski Lesson (Daniel)",icon:"ğŸ¿",details:"New Generation Ski School â€” Private Lesson\nFriday 27 Feb, 09:00â€“11:00\nBooking Ref: 682142\nCost: â‚¬299.60 (paid)\nMeeting Point: Courchevel 1850\nResort Contact: +33 (0)4 79 01 03 18"},
  {title:"Accommodation",icon:"ğŸ¨",details:"Les 3 VallÃ©es, a Beaumier hotel\nRue Park City, Courchevel 1850, 73120 France\n\nExpedia Itinerary: 72070500331395\nReserved for: Shannon Brenner\nRooms: 4 Ã— Comfort Room\n\nCheck-in: Thu 26 Feb from 4:00 PM\nCheck-out: Mon 2 Mar by 11:00 AM\n\nGuests: 6 adults"},
  {title:"Airport Transfers",icon:"ğŸš",details:"Private Door to Door Transfer â€” Premium Minivan\nBooking Ref: A2A296223\n\nOutbound:\nGeneva Airport â†’ Courchevel 1850 3 Valleys\nPick-up: 26/02/2026 at 09:45\nEst. Arrival: 26/02/2026 at 12:55\n5 Adults â€” â‚¬406.13\n\nReturn:\nCourchevel 1850 3 Valleys â†’ Geneva Airport\nPick-up: 02/03/2026 at 10:50\nEst. Arrival: 02/03/2026 at 14:00\n5 Adults â€” â‚¬406.13\n\nTotal: â‚¬812.26"},
  {title:"Ski Passes",icon:"ğŸ«",details:"TBC â€” To be booked"},
  {title:"Lunches",icon:"ğŸ½ï¸",details:"Sat 28 Feb â€” Bagatelle\nSun 1 Mar â€” BAIES"},
];

const PACKING = [
  {cat:"Ski Gear",items:["Ski jacket & pants","Base layers (thermal tops & bottoms)","Ski socks (3+ pairs)","Ski gloves / mittens","Helmet","Goggles","Neck gaiter / balaclava","Ski boots (or rent there)"]},
  {cat:"Clothing",items:["Warm casual wear for evenings","Waterproof boots / aprÃ¨s-ski boots","Beanie / warm hat","Sunglasses","Swimwear (if hotel has pool/spa)"]},
  {cat:"Essentials",items:["Passport","Travel insurance docs","Euros (cash)","Credit/debit cards","Phone charger & adapter (EU Type C)","Sunscreen (SPF 50+ for altitude)","Lip balm with SPF","Hand warmers","Camera"]},
  {cat:"Nice to Have",items:["Hip flask ğŸ¥ƒ","Bluetooth speaker","Card games","Snacks for the flight"]},
];

// â”€â”€â”€ SNOW â”€â”€â”€
(function createSnow() {
  const container = document.getElementById('snow');
  for (let i = 0; i < 40; i++) {
    const flake = document.createElement('div');
    flake.className = 'snowflake';
    const size = 2 + Math.random() * 4;
    flake.style.left = Math.random() * 100 + '%';
    flake.style.width = size + 'px';
    flake.style.height = size + 'px';
    flake.style.opacity = 0.3 + Math.random() * 0.5;
    flake.style.animationDuration = (4 + Math.random() * 6) + 's';
    flake.style.animationDelay = (Math.random() * 8) + 's';
    container.appendChild(flake);
  }
})();

// â”€â”€â”€ COUNTDOWN â”€â”€â”€
function updateCountdown() {
  const el = document.getElementById('countdown');
  const now = new Date();
  const diff = Math.max(0, TRIP_DATE - now);
  if (diff <= 0) {
    el.innerHTML = '<div class="countdown-done">SLIPPERY SLIDERS ğŸ¿â›·ï¸ğŸ”ï¸</div>';
    return;
  }
  const d = Math.floor(diff / 86400000);
  const h = Math.floor((diff % 86400000) / 3600000);
  const m = Math.floor((diff % 3600000) / 60000);
  const s = Math.floor((diff % 60000) / 1000);
  const units = [{v:d,l:"SLEEPS"},{v:h,l:"HRS"},{v:m,l:"MIN"},{v:s,l:"SEC"}];
  el.innerHTML = '<div class="countdown">' + units.map(u =>
    `<div class="countdown-box"><div class="countdown-num">${String(u.v).padStart(2,'0')}</div><div class="countdown-label">${u.l}</div></div>`
  ).join('') + '</div>';
}
updateCountdown();
setInterval(updateCountdown, 1000);

// â”€â”€â”€ HELPERS â”€â”€â”€
function makeSection(title, content, isOpen) {
  return `<div class="section">
    <button class="section-header" onclick="this.nextElementSibling.classList.toggle('open'); this.querySelector('.section-arrow').classList.toggle('open')">
      <span>${title}</span>
      <span class="section-arrow${isOpen ? ' open' : ''}">â–¼</span>
    </button>
    <div class="section-body${isOpen ? ' open' : ''}">${content}</div>
  </div>`;
}

// â”€â”€â”€ TABS â”€â”€â”€
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
  });
});

// â”€â”€â”€ RENDER ITINERARY â”€â”€â”€
document.getElementById('tab-itinerary').innerHTML = ITINERARY.map(day => {
  const items = day.items.map(item => {
    const inner = item.includes('LUNCH') ? `<span class="lunch-tag">${item}</span>` : item;
    return `<div class="itin-item">${inner}</div>`;
  }).join('');
  return makeSection(`${day.day} â€” ${day.title}`, items, !!day.open);
}).join('');

// â”€â”€â”€ RENDER CREW â”€â”€â”€
document.getElementById('tab-crew').innerHTML = `
  <div class="crew-grid">
    ${CREW.map(c => `
      <div class="crew-card">
        <div class="crew-emoji">${c.emoji}</div>
        <div class="crew-name">${c.name}</div>
        <div class="crew-flights">${c.flights}</div>
        <div class="crew-status">
          <span class="status-badge ${c.status === 'confirmed' ? 'status-confirmed' : 'status-pending'}">
            ${c.status === 'confirmed' ? 'âœ“ Confirmed' : 'âœˆï¸ Flight Details Pending'}
          </span>
        </div>
      </div>
    `).join('')}
  </div>
  <div class="crew-memories">
    <div class="crew-memories-icon">ğŸ“¸</div>
    <div class="crew-memories-text">Memories from our last trip together â€” here's to making more! ğŸ»</div>
  </div>`;

// â”€â”€â”€ RENDER BOOKINGS â”€â”€â”€
document.getElementById('tab-bookings').innerHTML = BOOKINGS.map(b => {
  let content = `<div class="booking-details">${b.details}</div>`;
  if (b.seats) {
    content += `
      <div style="margin-top:16px">
        <div class="seats-label">SEATS</div>
        <div style="overflow-x:auto">
          <table class="seats-table">
            <thead><tr><th></th><th>LX283</th><th>LX2802</th><th>LX2817</th><th>LX282</th></tr></thead>
            <tbody>${b.seats.map(p =>
              `<tr><td>${p.name}</td>${p.s.map(s => `<td>${s}</td>`).join('')}</tr>`
            ).join('')}</tbody>
          </table>
        </div>
        <div class="seats-label" style="margin-top:16px">E-TICKETS</div>
        ${b.seats.map(p =>
          `<div class="eticket-row"><span class="eticket-name">${p.name}</span><span class="eticket-num">${p.ticket}</span></div>`
        ).join('')}
      </div>`;
  }
  return makeSection(`${b.icon} ${b.title}`, content, !!b.open);
}).join('');

// â”€â”€â”€ RENDER SNOW REPORT â”€â”€â”€
(async function renderSnowReport() {
  const el = document.getElementById('tab-snow');
  el.innerHTML = '<div class="snow-report-loading"><div class="spinner"></div><br>Loading snow report...</div>';

  // Courchevel 1850 coordinates & altitude
  const LAT = 45.4153, LON = 6.6347, ALT = 1850;
  // Trip dates for highlighting
  const TRIP_START = '2026-02-25', TRIP_END = '2026-03-02';

  // Weather code to emoji/description
  function weatherInfo(code) {
    const map = {
      0:['â˜€ï¸','Clear'],1:['ğŸŒ¤ï¸','Mostly Clear'],2:['â›…','Partly Cloudy'],3:['â˜ï¸','Overcast'],
      45:['ğŸŒ«ï¸','Foggy'],48:['ğŸŒ«ï¸','Rime Fog'],
      51:['ğŸŒ§ï¸','Light Drizzle'],53:['ğŸŒ§ï¸','Drizzle'],55:['ğŸŒ§ï¸','Heavy Drizzle'],
      56:['ğŸŒ§ï¸','Freezing Drizzle'],57:['ğŸŒ§ï¸','Heavy Freezing Drizzle'],
      61:['ğŸŒ§ï¸','Light Rain'],63:['ğŸŒ§ï¸','Rain'],65:['ğŸŒ§ï¸','Heavy Rain'],
      66:['ğŸŒ§ï¸','Freezing Rain'],67:['ğŸŒ§ï¸','Heavy Freezing Rain'],
      71:['ğŸŒ¨ï¸','Light Snow'],73:['ğŸŒ¨ï¸','Snow'],75:['â„ï¸','Heavy Snow'],
      77:['â„ï¸','Snow Grains'],80:['ğŸŒ¦ï¸','Light Showers'],81:['ğŸŒ¦ï¸','Showers'],82:['ğŸŒ¦ï¸','Heavy Showers'],
      85:['ğŸŒ¨ï¸','Light Snow Showers'],86:['â„ï¸','Heavy Snow Showers'],
      95:['â›ˆï¸','Thunderstorm'],96:['â›ˆï¸','Thunderstorm + Hail'],99:['â›ˆï¸','Thunderstorm + Heavy Hail']
    };
    return map[code] || ['ğŸŒ¤ï¸','Unknown'];
  }

  function formatDay(dateStr) {
    const d = new Date(dateStr + 'T12:00:00');
    return d.toLocaleDateString('en-GB', { weekday: 'short', day: 'numeric' });
  }

  function isTripDay(dateStr) {
    return dateStr >= TRIP_START && dateStr <= TRIP_END;
  }

  try {
    // Fetch current conditions + 7-day forecast from Open-Meteo
    const currentUrl = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m,snow_depth&daily=weather_code,temperature_2m_max,temperature_2m_min,snowfall_sum,precipitation_probability_max&timezone=Europe/Paris&forecast_days=14&elevation=${ALT}`;

    const resp = await fetch(currentUrl);
    if (!resp.ok) throw new Error('API request failed');
    const data = await resp.json();

    const cur = data.current;
    const daily = data.daily;
    const [wxEmoji, wxDesc] = weatherInfo(cur.weather_code);

    // Current conditions
    let html = `
      <div class="section" style="border-color: rgba(100,181,246,0.3);">
        <div style="padding: 20px; text-align: center;">
          <div style="font-size: 48px; margin-bottom: 4px;">${wxEmoji}</div>
          <div style="font-size: 18px; font-weight: 700; font-family: Georgia, serif; margin-bottom: 2px;">${wxDesc}</div>
          <div style="font-size: 12px; color: rgba(255,255,255,0.5);">Courchevel 1850m â€” Right Now</div>
        </div>
      </div>
      <div class="snow-current">
        <div class="snow-stat">
          <div class="snow-stat-icon">ğŸŒ¡ï¸</div>
          <div class="snow-stat-value">${Math.round(cur.temperature_2m)}<span class="snow-stat-unit">Â°C</span></div>
          <div class="snow-stat-label">TEMPERATURE</div>
        </div>
        <div class="snow-stat">
          <div class="snow-stat-icon">â„ï¸</div>
          <div class="snow-stat-value">${cur.snow_depth != null ? Math.round(cur.snow_depth * 100) : 'â€”'}<span class="snow-stat-unit">cm</span></div>
          <div class="snow-stat-label">SNOW DEPTH</div>
        </div>
        <div class="snow-stat">
          <div class="snow-stat-icon">ğŸ’¨</div>
          <div class="snow-stat-value">${Math.round(cur.wind_speed_10m)}<span class="snow-stat-unit">km/h</span></div>
          <div class="snow-stat-label">WIND</div>
        </div>
        <div class="snow-stat">
          <div class="snow-stat-icon">ğŸ’§</div>
          <div class="snow-stat-value">${cur.relative_humidity_2m}<span class="snow-stat-unit">%</span></div>
          <div class="snow-stat-label">HUMIDITY</div>
        </div>
      </div>`;

    // 7-day forecast
    html += `<div class="section">
      <button class="section-header" onclick="this.nextElementSibling.classList.toggle('open'); this.querySelector('.section-arrow').classList.toggle('open')">
        <span>14-Day Forecast</span>
        <span class="section-arrow open">â–¼</span>
      </button>
      <div class="section-body open">
        <div class="snow-forecast">`;

    for (let i = 0; i < daily.time.length; i++) {
      const date = daily.time[i];
      const [dayEmoji] = weatherInfo(daily.weather_code[i]);
      const tripDay = isTripDay(date);
      html += `
        <div class="snow-forecast-day${tripDay ? ' trip-day' : ''}">
          <div class="snow-forecast-date">${formatDay(date)}</div>
          <div class="snow-forecast-icon">${dayEmoji}</div>
          <div class="snow-forecast-snow">${daily.snowfall_sum[i].toFixed(1)} cm</div>
          <div class="snow-forecast-label">SNOWFALL</div>
          <div class="snow-forecast-temp">${Math.round(daily.temperature_2m_min[i])}Â° / ${Math.round(daily.temperature_2m_max[i])}Â°</div>
          ${tripDay ? '<div class="trip-badge">TRIP DAY</div>' : ''}
        </div>`;
    }

    html += `</div></div></div>`;

    // Total snowfall during trip period
    let tripSnow = 0, tripDays = 0;
    for (let i = 0; i < daily.time.length; i++) {
      if (isTripDay(daily.time[i])) {
        tripSnow += daily.snowfall_sum[i];
        tripDays++;
      }
    }
    if (tripDays > 0) {
      html += `
        <div class="section" style="border-color: rgba(100,181,246,0.3);">
          <div style="padding: 20px; text-align: center;">
            <div style="font-size: 28px; margin-bottom: 4px;">ğŸ¿</div>
            <div style="font-size: 14px; font-weight: 700; color: #90caf9;">Trip Week Forecast</div>
            <div style="font-size: 32px; font-weight: 800; font-family: Georgia, serif; margin: 8px 0;">${tripSnow.toFixed(1)} cm</div>
            <div style="font-size: 12px; color: rgba(255,255,255,0.5);">Expected snowfall during your trip</div>
          </div>
        </div>`;
    }

    const now = new Date();
    html += `<div class="snow-updated">Last updated: ${now.toLocaleString('en-GB', { dateStyle: 'medium', timeStyle: 'short' })} â€” Open-Meteo API</div>`;

    el.innerHTML = html;
  } catch (err) {
    el.innerHTML = `<div class="snow-report-error">âš ï¸ Could not load snow report.<br><span style="font-size:12px; opacity:0.6;">${err.message}</span></div>`;
  }
})();

// â”€â”€â”€ RENDER PACKING â”€â”€â”€
const checkedItems = {};
function renderPacking() {
  document.getElementById('tab-packing').innerHTML =
    '<div class="packing-hint">Tap items to check them off âœ“</div>' +
    PACKING.map((cat, ci) => {
      const items = cat.items.map((item, ii) => {
        const key = `${ci}-${ii}`;
        const checked = checkedItems[key];
        return `<div class="packing-item" data-key="${key}">
          <div class="packing-check${checked ? ' checked' : ''}">${checked ? 'âœ“' : ''}</div>
          <span class="packing-text${checked ? ' checked' : ''}">${item}</span>
        </div>`;
      }).join('');
      return makeSection(cat.cat, items, ci === 0);
    }).join('');

  document.querySelectorAll('.packing-item').forEach(el => {
    el.addEventListener('click', (e) => {
      e.stopPropagation();
      const key = el.dataset.key;
      checkedItems[key] = !checkedItems[key];
      const check = el.querySelector('.packing-check');
      const text = el.querySelector('.packing-text');
      check.classList.toggle('checked');
      check.textContent = checkedItems[key] ? 'âœ“' : '';
      text.classList.toggle('checked');
    });
  });
}
renderPacking();
</script>
</body>
</html>
